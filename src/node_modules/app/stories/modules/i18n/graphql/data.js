import values               from 'lodash/values'


import generateData         from 'engine/graphql/generate/hoc/data'

import config               from '../config'
import debug                from '../debug'
import methods              from './methods'

export default generateData({
  config,
  debug,
  methods,
  mapResult: (result) => {
    const { i18nData = {} } = result

    const i18nDataByLangName = {}
    values(i18nData).forEach(doc => {
      const { name, lang, value } = doc
      if (!i18nDataByLangName.hasOwnProperty(lang)) i18nDataByLangName[lang] = {}
      i18nDataByLangName[lang][name] = value
    })

    return {
      ...result,
      i18nDataByLangName
    }
  }
})
