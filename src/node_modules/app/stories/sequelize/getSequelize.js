import Sequelize            from 'sequelize'

import debug                from './debug'

const options = {
  databaseURL: 'sqlite:stories.sqlite',
  freezeTableName: true,
  logging: debug,
}

let sequelize

export default function getSequelize() {
  if (!sequelize) {
    const { databaseURL, freezeTableName, logging } = options

    sequelize = new Sequelize(databaseURL, {
      logging,
      define: {
        freezeTableName
      },
    })
  }

  return sequelize
}
