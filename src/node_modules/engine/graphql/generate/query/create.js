import gql                  from 'graphql-tag'

import generateVarString    from 'engine/graphql/generate/varString'
import generateCallString   from 'engine/graphql/generate/callString'
import generateOutputString from 'engine/graphql/generate/outputString'

export default function generateQueryCreate(payload) {
  const { name, fieldList } = payload
  const query = `mutation ${ name }Create(
${ generateVarString({ fieldList: fieldList.slice(1) }) }
  ) {
      ${ name }Create (
      defaults: {
${ generateCallString({ fieldList: fieldList.slice(1) }) }
  }
      ) {
      result {
        ${ generateOutputString({ name, fieldList }) }
      }
      errors {
        code
        message
      }
  }
}`

  return gql`${ query }`
}
