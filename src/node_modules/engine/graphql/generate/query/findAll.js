import { upperFirst }       from 'lodash'

import gql                  from 'graphql-tag'

import generateOutputString from 'engine/graphql/generate/outputString'

export default function generateQueryFindAll(payload) {
  const { name, fieldList, extraResult = `` } = payload
  const inputType = `Input${ upperFirst(name) }`
  const query = `query ${ name }FindAll(
    $where: ${ inputType }
    $limit: Int
    $offset: Int
  ) {
      ${ name }FindAll (
        where: $where
        limit: $limit
        offset: $offset
      ) {
      
    result {
${ generateOutputString({ name, fieldList }) }
${ extraResult }
    }
    
    errors {
      code
      message
    }
  }
}`

  return gql`${ query }`
}
