import _                    from 'lodash'
import DataType             from 'sequelize'

import types                from 'engine/types'

const filterUndefined = payload => _.pickBy(payload, value => value !== undefined )

export default {
  [types.Boolean]: (payload) => {
    return {
      type: DataType.BOOLEAN(),
      ...filterUndefined(payload),
    }
  },
  [types.Date]: (payload) => {
    return {
      type: DataType.DATE,
      ...filterUndefined(payload),
    }
  },
  [types.Int]: (payload) => {
    return {
      type: DataType.INTEGER(),
      ...filterUndefined(payload),
    }
  },
  [types.ID]: (payload) => {
    return {
      type: DataType.UUID(),
      defaultValue: DataType.UUIDV1,
      ...filterUndefined(payload),
    }
  },
  [types.Float]: (payload) => {
    return {
      type: DataType.DOUBLE(),
      ...filterUndefined(payload),
    }
  },
  [types.String]: (payload) => {
    return {
      type: DataType.STRING(255),
      ...filterUndefined(payload),
    }
  },
}
